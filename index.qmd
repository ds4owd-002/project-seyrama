---
title: "My project"
author: 
  name: "Seyram A. Asimah"
  email: setramasimah@gmail.com
  
date: today
format: 
  html: 
    toc: true
    code-fold: true
execute: 
  echo: true
  warning: false
bibliography: citations.bib
csl: apa.csl
editor: visual
---

# Introduction

## Project description

The COVID-19 pandemic highlighted the importance of water, sanitation, hygiene (WASH), and infection prevention and control (WASH/IPC) infrastructure in health care facilities, particularly in resource-constrained settings. The World Health Organization defines health care facilities as all formally recognized facilities that provide health services, including primary, secondary, and tertiary facilities, across public and private sectors, as well as temporary structures established for emergency contexts such as cholera treatment centers.

In Ghana, primary health care (PHC) services are delivered through a tiered system of facilities comprising Community-Based Health Planning and Services (CHPS) compounds, health centers, and district hospitals. CHPS compounds represent the most basic, community-level PHC facilities and provide promotive, preventive, and basic curative care through both facility-based and home-based services. Health centers serve as an intermediate level of care and are responsible for planning, developing, monitoring and evaluating community-based service delivery. District hospitals provide more comprehensive health care services and work in collaboration with District Health Administrations and local government authorities to plan, supervise, monitor, and coordinate service delivery within their catchment areas.

As the first point of contact for most patients, PHC facilities play a pivotal role in prevening the transmission of infectious diseases during public health emergencies. Adequate WASH/IPC infrastructure within these facilities is therefore essential for effective outbreak preparedness and response.

In this context, a facility-level assessment was conducted in May 2022 as part of a project aimed at improving access to WASH services in the Upper East Region of Ghana. The assessment covered 39 primary health care facilities across four municipalities and collected data on water supply, sanitation, hygiene facilities, and health care waste management.

# Methods

I used data collected in May 2022 from 39 primary health care facilities across four municipalities in Ghanaâ€™s Upper East Region. Trained field teams collected the data using structured questionnaires administered through the mWater mobile data collection platform, combining direct observation with facility-reported information on water, sanitation, hygiene, and health care waste management.

## Import

```{r}
library(tidyverse)
library(here)
library(knitr)
```

```{r}
raw_data <- read_csv(here::here("data/raw/hcfs_assessment.csv"), locale = locale(encoding = "ISO-8859-1"))

processed_data <- raw_data |>
  select(`Health Care Facility name`, `Level of health care facility`, `Facility ownership`, `Number of outpatients`, `OPD units`, `Number of inpatients`, `inpatients unit`, `Main water supply`, `Water availability from main supply at time of survey`, `Common types of toilets for patients`, `At least one toilet usable at survey`, `Functioning hygiene stations at least 5 m from toilet`, `Separate toilets for staff`, `Urinals at the facility`, `What is the disposal mechanism for menstrual hygiene waste at the healthcare facility`, `Who is responsible for disposing of menstrual hygiene waste?`, `Is there a water point inside?`, `Is a trained person responsible for the management of health care waste in the health care facility`, `Is a protocol or Standard Operating Procedure for safe management of health care waste clearly visible and legible`, `Is waste correctly segregated into at least three labelled bins in the CONSULTATION area`, `Is all infectious waste stored in a protected area before treatment for no longer than the default and safe time`, `How does this facility usually treat or dispose of infectious waste`, `How does this facility usually treat ordispose of infectious waste_comment`, `Is the infectious waste treatment within the facility currently functional`, `How does this facility usually treat or dispose of GENERAL waste non-infectious and non-sharps waste`, `How does this facility usually treat or dispose of GENERAL waste non-infectious and non-sharps waste _other`, `Are cleaning protocols available`, `Are adequate cleaning staff available`, `Have all staff responsible for cleaning received training`, `Is there a record of cleaning visible and signed by the cleaners each day`) |> 

  rename(hcf_name = `Health Care Facility name`, hcf_level = `Level of health care facility`, hcf_ownership = `Facility ownership`, outpatients = `Number of outpatients`, OPD_units = `OPD units`, inpatients = `Number of inpatients`, inpatients_units = `inpatients unit`, ws_main = `Main water supply`, ws_main_avl = `Water availability from main supply at time of survey`, toilet_types = `Common types of toilets for patients`, toilet_usable = `At least one toilet usable at survey`, hyg_station_funct = `Functioning hygiene stations at least 5 m from toilet`, toilet_sep_staff = `Separate toilets for staff`, urinals = `Urinals at the facility`, mhm_disposal = `What is the disposal mechanism for menstrual hygiene waste at the healthcare facility`, mhm_waste_responsible = `Who is responsible for disposing of menstrual hygiene waste?`, toilet_waterpoint_inside = `Is there a water point inside?`, hcf_waste_mgt_responsible = `Is a trained person responsible for the management of health care waste in the health care facility`, hcf_waste_SOP = `Is a protocol or Standard Operating Procedure for safe management of health care waste clearly visible and legible`, hcf_waste_segregated = `Is waste correctly segregated into at least three labelled bins in the CONSULTATION area`, infectious_waste_storage = `Is all infectious waste stored in a protected area before treatment for no longer than the default and safe time`, infectious_waste_treatment = `How does this facility usually treat or dispose of infectious waste`, infectious_waste_treatment_comment = `How does this facility usually treat ordispose of infectious waste_comment`, infectious_waste_treatment_funct = `Is the infectious waste treatment within the facility currently functional`, hcf_waste_treatment_general = `How does this facility usually treat or dispose of GENERAL waste non-infectious and non-sharps waste`, hcf_waste_treatment_general_other = `How does this facility usually treat or dispose of GENERAL waste non-infectious and non-sharps waste _other`, cleaning_protocols_avl = `Are cleaning protocols available`, cleaning_staff_avl = `Are adequate cleaning staff available`, cleaning_staff_trained = `Have all staff responsible for cleaning received training`, cleaning_recs = `Is there a record of cleaning visible and signed by the cleaners each day`) |> 
  
  filter(!(is.na(ws_main_avl) & is.na(hyg_station_funct) & is.na(toilet_usable) & is.na(urinals) & is.na(mhm_disposal)))
```

```{r}
processed_data <- processed_data |> 
  mutate(
    inpatients_units = if_else(
      is.na(inpatients) & inpatients_units == "per day", NA, inpatients_units
      ),
    
    ws_main_avl = if_else(
      is.na(ws_main_avl), "No water source", ws_main_avl
    ),
    
    toilet_usable = if_else(
      toilet_types == "No toilet/latrine" & toilet_usable == "No", NA, toilet_usable
    ),
    
    urinals = if_else(
      is.na(urinals), "No", urinals
    ),
    
    toilet_waterpoint_inside = if_else(
      toilet_types == "No toilet/latrine" & toilet_waterpoint_inside == "Yes", "No", toilet_waterpoint_inside
    ),
    
    hcf_waste_segregated = if_else(
      is.na(hcf_waste_segregated), "No, bins are not present", hcf_waste_segregated
    ),
    
    daily_outpatients = if_else(
      OPD_units == "per week",
      round(outpatients / 7, 0),
      outpatients
    ),
    
    daily_inpatients = if_else(
      inpatients_units == "per week",
      round(inpatients / 7, 0),
      inpatients
    )
  )

write_csv(processed_data,
          here::here("data/processed/seyrama-project-data_clean.csv"))
```

# Results

The analysis included data from 38 healthcare facilities, as one facility was excluded due to missing key variables. Facilities represented different levels of care and ownership types, providing a broad overview of service delivery contexts.

Counts by facility-level, ownership, and availability of WASH-related infrastructure were examined to understand the distribution of service and infrastructure across the various healthcare facilities.

```{r}
processed_data |> 
  count(hcf_level)

processed_data |> 
  count(hcf_ownership)

processed_data |> 
  count(ws_main_avl)

processed_data |> 
  count(toilet_usable)

processed_data |> 
  count(hyg_station_funct)

processed_data |> 
  count(urinals)

processed_data |> 
  group_by(hcf_level) |> 
  summarise(
    avg_daily_opd = round(mean(daily_outpatients, na.rm = TRUE), 0),
    avg_daily_inpt = round(mean(daily_inpatients, na.rm = TRUE),0),
    prop_toilet_usable = round(mean(toilet_usable == "Yes", na.rm = TRUE) * 100, 0),
    prop_water_avail = round(mean(ws_main_avl == "Yes", na.rm = TRUE) * 100, 0),
    .groups = "drop"
    ) |> 
  rename("Facility Level" = hcf_level,
         "Average Daily Outpatients" = avg_daily_opd,
         "Average Daily Inpatients" = avg_daily_inpt,
         "Proportion of facilities with functioning toilets (%)" = prop_toilet_usable,
         "Proportion of facilities with water available (%)" = prop_water_avail) |> 
      kable(caption = "Summary of patient load and WASH indicators by facility level")
```

Water, Sanitation and Hygiene availability

An indicator of basic WASH access, defined as the simultaneous availability of water, usable toilets, and functioning hygiene stations was generated. Facilities were classified as having basic WASH access only when all three conditions were met.

82% of facilities had access to basic water, sanitation and hygiene as shown in @tbl-basic-wash. Although 82% of facilities met the criteria for basic WASH, this estimate applies only to facilities with existing sanitation infrastructure and complete WASH data. A separate assessment of toilet availability as shown in @fig-functioning-toilets below shows that many facilities lacked any toilet or latrine.

```{r}
#| label: tbl-basic-wash
#| tbl-cap: "Number of healthcare facilities with access to basic water, sanitation and hygiene"
processed_data <- processed_data |> mutate(basic_wash = if_else(ws_main_avl == "Yes" &
                                toilet_usable == "Yes" &
                                hyg_station_funct == "Yes",
                              "Yes","No"))

processed_data |> 
  count(basic_wash) |> 
  mutate(percent = round(n / sum(n) * 100, 0))

```

Functionality of sanitation and hygiene infrastructure

@fig-functioning-toilets illustrates the availability and functionality of toilets across facilities. Many facilities lacked any toilet or latrine, while fewer had non-functioning toilets. Among facilities with toilet infrastructure, functioning toilets were more common than non-functioning ones, indicating that the primary sanitation gap is the absence of toilets rather than functionality.

```{r}
library(ggplot2)
#| label: fig-functioning-toilets
#| fig-cap: "Functioning toilets across facilities" 
processed_data |> 
  mutate(toilet_status_plot = case_when(
    is.na(toilet_usable) ~ "No toilet/latrine",
    toilet_usable == "Yes" ~ "Functioning toilet",
    toilet_usable == "No" ~ "Non-functioning toilet")) |> 

  ggplot(aes(x = toilet_status_plot)) +
  geom_bar(fill = "darkgreen") + 
  labs(
    title = "Availability and functionality of toilets across facilities",
    x = "Toilet usable",
    y = "Number of facilities"
  )
```

Availability and functionality of toilets across all facility levels

@fig-functioning-toilets-across-hcfs-levels shows the distribution of toilets across healthcare facilities, dissagregated by facility level. Facilities are grouped by their reported toilet status: functioning (Yes), non-functioning (No), or no toilet/latrine (NA). The plot shows that most facilities with toilets had functioning units while non-functioning toilets were relatively uncommon. However, among lower-level facilities, several facilities did not have any toilet infrastructure, which is represented by the NA category.

```{r}
#| label: fig-functioning-toilets-across-hcfs-levels
#| fig-cap: Functioning toilets across facility levels

processed_data |> 
  ggplot(aes(x = hcf_level, fill = toilet_usable)) + geom_bar() +
  labs(
    title = "Functioning toilets across facilities",
    x = "Facility level",
    y = "Number of facilities",
    fill = "Toilet status"
  )

```

```{r}

library(ggplot2)

processed_data |> 
ggplot(aes(x = hyg_station_funct)) +
  geom_bar(fill = "darkblue") +
  labs(
    title = "Functioning hygiene stations",
    x = "Hygiene station functioning",
    y = "Number of facilities"
  )

```

```{r}

ggplot(processed_data, aes(x = daily_outpatients)) + geom_histogram(bins = 10, fill = "darkred") + 
  labs(
    title = "Distribution of daily outpatient visits",
    x = "Daily outpatients",
    y = "Number of facilities"
  )
```

# Conclusions

# References
